<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>KenariCoin (KN)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js"></script>
</head>
<body class="min-h-screen bg-gradient-to-b from-yellow-100 to-white flex flex-col items-center justify-center p-6">

  <!-- Logo & Header -->
  <div class="flex flex-col items-center mb-6 animate-fadeIn">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 60" class="w-40 mb-4">
      <circle cx="30" cy="30" r="25" fill="#FFD700" stroke="black" stroke-width="3"/>
      <text x="30" y="35" text-anchor="middle" font-size="18" font-family="Arial Black" fill="black">KN</text>
      <text x="70" y="38" font-size="20" font-family="Arial Black" fill="#333">KenariCoin</text>
    </svg>
    <h1 class="text-4xl font-bold text-gray-800">KenariCoin (KN)</h1>
    <p class="text-gray-600 mt-2">Desentralisasi • Transparansi • Masa depan aset digital</p>
  </div>

  <!-- Wallet + Action Buttons -->
  <div class="flex flex-col gap-4 items-center">
    <button id="connectBtn" class="rounded-2xl px-6 py-3 text-lg bg-yellow-400 hover:bg-yellow-500 text-white font-bold shadow-lg transition">
      Connect Wallet
    </button>
    <button id="balanceBtn" class="rounded-2xl px-6 py-3 text-lg bg-green-500 hover:bg-green-600 text-white font-bold shadow-lg transition hidden">
      Check Balance
    </button>
    <button id="buyBtn" class="rounded-2xl px-6 py-3 text-lg bg-blue-500 hover:bg-blue-600 text-white font-bold shadow-lg transition hidden">
      Buy KN on PancakeSwap
    </button>
    <p id="balanceText" class="text-gray-700 font-medium"></p>
  </div>

  <!-- Footer -->
  <footer class="absolute bottom-4 text-gray-500 text-sm">
    © <span id="year"></span> KenariCoin. All rights reserved.
  </footer>

  <script>
    // Tahun otomatis
    document.getElementById("year").innerText = new Date().getFullYear();

    // Kontrak token KenariCoin (mainnet)
    const tokenAddress = "0x0B70E29a77775E9aa2F7A7c66C371B411d4D685c"; // ganti kalau beda
    const tokenABI = [
      "function balanceOf(address owner) view returns (uint256)",
      "function decimals() view returns (uint8)",
      "function symbol() view returns (string)"
    ];

    let provider, signer, account;

    const connectBtn = document.getElementById("connectBtn");
    const balanceBtn = document.getElementById("balanceBtn");
    const buyBtn = document.getElementById("buyBtn");
    const balanceText = document.getElementById("balanceText");

    // Connect Wallet
    connectBtn.addEventListener("click", async () => {
      if (window.ethereum) {
        try {
          provider = new ethers.providers.Web3Provider(window.ethereum);
          await provider.send("eth_requestAccounts", []);
          signer = provider.getSigner();
          account = await signer.getAddress();
          connectBtn.innerText = "Connected: " + account.slice(0,6) + "..." + account.slice(-4);

          balanceBtn.classList.remove("hidden");
          buyBtn.classList.remove("hidden");
        } catch (err) {
          console.error("User rejected:", err);
        }
      } else {
        alert("Please install MetaMask!");
      }
    });

    // Check Balance
    balanceBtn.addEventListener("click", async () => {
      if (!provider) return;
      const contract = new ethers.Contract(tokenAddress, tokenABI, provider);
      const balance = await contract.balanceOf(account);
      const decimals = await contract.decimals();
      const symbol = await contract.symbol();
      const formatted = ethers.utils.formatUnits(balance, decimals);
      balanceText.innerText = `Your Balance: ${formatted} ${symbol}`;
    });

    // Buy Token on PancakeSwap
    buyBtn.addEventListener("click", () => {
      window.open(`https://pancakeswap.finance/swap?outputCurrency=${tokenAddress}`, "_blank");
    });
  </script>

  <style>
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-fadeIn {
      animation: fadeIn 0.8s ease-out;
    }
  </style>
</body>
</html>
